(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{"../core/dist/esm-es5/ac-select.entry.js":function(e,t,i){"use strict";i.r(t),i.d(t,"ac_select",(function(){return v}));var n=i("../core/dist/esm-es5/core-15293804.js"),o=(i("../core/dist/esm-es5/component-behavior-989d398a.js"),i("../core/dist/esm-es5/async-data-behavior-550773fe.js")),s=i("../core/dist/esm-es5/ensure-controller-ecd062f0.js"),r=i("../core/dist/esm-es5/index-b4480df4.js"),l=i("../core/dist/esm-es5/bind-6a1eab48.js"),a=(i("../core/dist/esm-es5/_commonjsHelpers-97e6d7b1.js"),i("../core/dist/esm-es5/browser-c7265b0c.js"),i("../core/dist/esm-es5/focus-behavior-cfb3b708.js")),c=i("../core/dist/esm-es5/index-3c53fba9.js"),h=i("../core/dist/esm-es5/ac-fa-icon-5572b693.js"),u=i("../core/dist/esm-es5/index.es-75ec09e3.js"),p=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{a(n.next(e))}catch(t){s(t)}}function l(e){try{a(n.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}a((n=n.apply(e,t||[])).next())}))},d=function(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(l){s=[6,l],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},f=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var s=arguments[t],r=0,l=s.length;r<l;r++,o++)n[o]=s[r];return n},b=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},v=function(){function e(e){Object(n.h)(this,e),this.SelectPanel=Object(s.a)(Object(s.b)("ac-panel-controller")),this.focusBehavior=new a.a(this),this.formFieldBehavior=new c.a(this),this.asyncDataBehavior=new o.a(this),this.noResultsLabel="No results for",this.searchHelperLabel="Use the field to search",this.selectChange=Object(n.e)(this,"selectChange",7)}return e.prototype.valueDidUpdate=function(e,t){Object(r.b)(e,[])||Object(r.b)(e,t)||this.formatSelectedText()},e.prototype.optionsDidUpdate=function(e,t){if(e){var i=e.filter((function(e){return e.selected}));if(i.length>0){var n=i.map((function(e){return e.value}));this.value=this.multiple?n:n[0]}else this.value=t?null:this.value}this.formatSelectedText()},e.prototype.isShowingPanelDidUpdate=function(){0===this.options.length&&(this.selectedText=null),this.hasFocus=this.isShowingPanel},e.prototype.errorDidUpdate=function(e){e?(this.acInputBase.error=!0,this.formFieldBehavior.setInvalid()):(this.acInputBase.error=!1,this.formFieldBehavior.setValid())},e.prototype.filterDidUpdate=function(){var e=this;this.filter?this.fetch?this.asyncDataBehavior.executeFetch():this.filteredOptions=this.options.filter((function(t){return t.title.toLowerCase().indexOf(e.filter.toLowerCase())>-1})):this.filteredOptions=null},e.prototype.getNativeFormField=function(){return p(this,void 0,void 0,(function(){return d(this,(function(e){return[2,this.nativeSelect]}))}))},e.prototype.getSelectedOptions=function(){return p(this,void 0,void 0,(function(){return d(this,(function(e){return[2,this.getOptionsByValue(this.value)]}))}))},e.prototype.setValue=function(e){return p(this,void 0,void 0,(function(){return d(this,(function(t){return this.value=e,this.requestCheckValidity=!0,this.formFieldBehavior.setDirty(),e instanceof Array?this.options.forEach((function(t){t.selected=e.includes(t.value)})):this.options.forEach((function(t){t.selected=e===t.value})),this.options=f(this.options),[2]}))}))},e.prototype.setInitialOption=function(e){return p(this,void 0,void 0,(function(){var t;return d(this,(function(i){return t=Object(c.b)(e),this.options=t.map((function(e){return Object.assign(Object.assign({},e),{selected:!0})})),[2]}))}))},e.prototype.getFormFieldBehavior=function(){return p(this,void 0,void 0,(function(){return d(this,(function(e){return[2,this.formFieldBehavior]}))}))},e.prototype.whenBlur=function(e){this.selectPanel.contains(e)||(this.isShowingPanel&&this.togglePanel(),this.formFieldBehavior.setTouched())},e.prototype.whenReceiveData=function(e){this.filteredOptions=e.data,this.options=e.data},e.prototype.getFetchParams=function(){return{filter:this.filter}},e.prototype.componentDidLoad=function(){this.options?this.optionsDidUpdate(this.options,null):this.loadOptionsFromHTML()},e.prototype.componentDidUnload=function(){this.closePanel()},e.prototype.componentDidUpdate=function(){this.nativeSelect.value=this.value?this.nativeSelect.value:"",this.requestCheckValidity&&(this.formFieldBehavior.checkValidity(this.value),this.requestCheckValidity=!1,this.selectChange.emit(this.value))},e.prototype.getOptionsByValue=function(e){var t=[];return this.options&&e&&(e instanceof Array?this.options.forEach((function(i){e.includes(i.value)&&t.push(i)})):this.options.forEach((function(i){e===i.value&&t.push(i)}))),t},e.prototype.formatSelectedText=function(){var e=this.getOptionsByValue(this.value);if(this.options){var t=e.length,i=this.options.filter((function(e){return!e.separator})).length;t>0&&t<3?this.selectedText=e.map((function(e){return e.title})).join(", "):t>2&&t<i?this.selectedText=t+" "+this.label:t===i&&0!==t&&(this.selectedText="Todos ("+t+")")}},e.prototype.loadOptionsFromHTML=function(){var e=this.host.querySelectorAll("option, optgroup"),t=Array.prototype.map.call(e,(function(e){return{title:"OPTGROUP"===e.tagName?e.label:e.text,value:e.value,selected:e.hasAttribute("selected")&&e.selected,separator:"OPTGROUP"===e.tagName,group:"OPTGROUP"===e.parentElement.tagName?e.parentElement.label:null}}));t.length>0&&(this.options=t)},e.prototype.renderNativeOptions=function(){var e=this.value?this.value instanceof Array?this.value:[this.value]:[];return this.options.map((function(t){if(!t.separator)return Object(n.g)("option",{selected:e.includes(t.value),value:t.value},t.title)}))},e.prototype.renderOptions=function(e){var t=this;return e?e.length>0?e.map((function(e){return e.separator?Object(n.g)("li",{class:"ac-list__separator"},Object(n.g)("span",{class:"ac-list__separator-title"},e.title),Object(n.g)("span",{class:"ac-list__separator-line"})):Object(n.g)("li",{class:"ac-list__item "+(e.selected?"ac-list__item--selected":""),onClick:function(){return t.handleSelect(e)}},e.title)})):Object(n.g)("li",{class:"ac-list__helper-item"},this.noResultsLabel," ",this.filter):this.searchable?Object(n.g)("li",{class:"ac-list__helper-item"},this.searchHelperLabel):null},e.prototype.togglePanel=function(){this.loading||this.isShowingPanel?this.closePanel():this.acInputBase.setFocus()},e.prototype.openPanel=function(){this.isShowingPanel=!0},e.prototype.closePanel=function(){this.isShowingPanel=!1},e.prototype.handleSelect=function(e){var t=this.options.findIndex((function(t){return t.value===e.value}));this.multiple?this.options[t].selected=!e.selected:e.selected||this.options.forEach((function(e,i){e.selected=i===t})),this.options=f(this.options),this.isShowingPanel=this.multiple,this.requestCheckValidity=!0,this.formFieldBehavior.setDirty(),this.filter=null},e.prototype.handleDebouncedKeyUp=function(){return p(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return[4,this.acInputBase.getNativeInput()];case 1:return e=t.sent(),this.filter=e.value,[2]}}))}))},e.prototype.handleChangeInput=function(){return p(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return[4,this.acInputBase.getNativeInput()];case 1:return e=t.sent(),Object(r.a)(e.value)&&(this.options=[]),[2]}}))}))},e.prototype.render=function(){var e=this,t=this.isShowingPanel?u.a:u.b,i=this.SelectPanel,o=this.filteredOptions||this.options;return Object(n.g)(n.b,null,Object(n.g)("div",{class:"ac-select__phantom-dom"},Object(n.g)("slot",null)),Object(n.g)("select",{ref:function(t){return e.nativeSelect=t},name:this.name,multiple:this.multiple,disabled:this.disabled,class:"ac-select__native","data-native":!0},this.options&&this.renderNativeOptions()),Object(n.g)("ac-input-base",{ref:function(t){e.acInputBase=t},label:this.label,type:"text",required:this.required,value:this.selectedText,onFocus:this.openPanel,onChange:this.handleChangeInput,disabled:this.disabled,readonly:!this.searchable,onKeyUp:this.searchable?this.handleDebouncedKeyUp:null,size:this.size},Object(n.g)("slot",{name:"item-start",slot:"item-start"}),Object(n.g)("slot",{name:"input-label",slot:"input-label"}),Object(n.g)("ac-button",{slot:"item-end",theme:this.isShowingPanel?"primary":"light",fill:"flat",disabled:this.disabled,loading:this.loading,onClick:this.togglePanel,"icon-only":!0},Object(n.g)(h.a,{icon:t,size:12}))),this.error&&"string"===typeof this.error||this.helperText&&"string"===typeof this.helperText?Object(n.g)("span",{class:"ac-select__helper-text"},this.error||this.helperText):null,Object(n.g)(i,{ref:function(t){return e.selectPanel=t},class:"ac-select__panel",popperPivot:this.host,reset:!this.isShowingPanel},Object(n.g)("slot",{name:"item-top",slot:"item-top"}),Object(n.g)("ul",{class:"ac-select__list ac-list",style:{maxHeight:v.MAX_ITEMS_TO_RENDER*v.ITEM_HEIGHT+"px"}},this.renderOptions(o)),Object(n.g)("slot",{name:"item-bottom",slot:"item-bottom"})))},Object.defineProperty(e.prototype,"host",{get:function(){return Object(n.f)(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{value:["valueDidUpdate"],options:["optionsDidUpdate"],isShowingPanel:["isShowingPanelDidUpdate"],error:["errorDidUpdate"],filter:["filterDidUpdate"]}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return"ac-select{display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:column;flex-direction:column}ac-select>[slot=item-bottom],ac-select>[slot=item-top]{display:none!important}ac-select .ac-select__helper-text{display:block;margin-top:8px;color:var(--color-neutral-darker,#646464);font-size:12px}ac-select .ac-select__native,ac-select .ac-select__phantom-dom{display:none}ac-select.form-field--invalid .ac-select__helper-text{color:var(--color-alert-normal,#f0000a)}ul.ac-select__list::-webkit-scrollbar{width:8px;height:8px}ul.ac-select__list::-webkit-scrollbar-track{background:rgba(var(--color-theme-contrast-rgb,17,17,17),.2)}ul.ac-select__list::-webkit-scrollbar-thumb{background:rgba(var(--color-theme-contrast-rgb,17,17,17),.3)}ul.ac-select__list::-webkit-scrollbar-thumb:hover{background:rgba(var(--color-theme-contrast-rgb,17,17,17),.4)}"},enumerable:!0,configurable:!0}),e}();v.MAX_ITEMS_TO_RENDER=10,v.ITEM_HEIGHT=30,b([l.a],v.prototype,"togglePanel",null),b([l.a],v.prototype,"openPanel",null),b([l.a],v.prototype,"closePanel",null),b([l.a],v.prototype,"handleSelect",null),b([l.a,Object(n.a)(200)],v.prototype,"handleDebouncedKeyUp",null),b([l.a],v.prototype,"handleChangeInput",null)}}]);
//# sourceMappingURL=84.d022eec71cf98254ebc7.js.map